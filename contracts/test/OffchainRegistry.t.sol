// SPDX-License-Identifier: LGPL-3.0-or-later
pragma solidity ^0.8.13;

import "forge-std/Test.sol";
import "../src/OffchainRegistry.sol";

contract OffchainRegistryTest is Test {
    OffchainRegistry public offchain_registry;

    function setUp() public {
	BatchSMTOpVerifier batch_op_verifier = new BatchSMTOpVerifier();
	SingleSMTOpVerifier single_op_verifier = new SingleSMTOpVerifier();
        offchain_registry = new OffchainRegistry(0, batch_op_verifier, single_op_verifier);
    }

    function test_insert_key() public {
	bytes memory op_proof = hex"2c88636260eafb8f6dd4d58d84f4810f868f39a1f0bc729613d59506ab1ba6821303f7c6c179358865a4b90d63ea9a8db3c29b32c6348fc7e121ee034d59749f211ec42a03930e10f88ec4fab423cf7dcdc4648817b394f938bb6714994e21380fb01e266473633d29c5c26333ee185c9460c52e3139c9a9f2a4168af8a5702e09083b4a58aa0013f14b25509ea3ff034c4a60a1f0f7ddf4fc7f37aa3debc7ec1d590f68081ea87d7bb58b04e62ddcc4356d1716e58e52604c612b2e2a608b54008e321998adfc38c7757568259601d242ab338f57c82a9d1be3db0c57ca36aa06fe53bef30c860f84efaa1e592d1f7ec5f363ccc10ce9fe8403ff6a29189ef9140258132f97dbcae214fe6c96332dd158527eccb8e7dac9a7a5c2b9d96e7b020ff4e5cd0bba22c01d7c4a0fed95a5ceabd28727be5324d7ba5e06a53ade359f2cb05c49d96e3ee30b64be74054c2bb2f665c5e4d22ec03fcbf90423c29e70e319c035be94eb472781ae3b498a223fbb823b72022d1d892911850af361da1b11043d67dcccd9f9f0273d51d5b72264e32a50e336e8214c9f23373aac7c6ad2362606ede45ab296170e53a6138f0a67536b22196160eddd44f8ea25aa8a1ba95c283537c5a59d8e41c2e0b519f958ff2cbd1fba28eef7618cf0a2d223d6df67a31b6fdb29f82b1fdb680abc5607ecc46fabd268deaee21141b6524a954dfe168c0f13f18c6b55a2a2cdb21cd03411e76bb0a3418e7936e33dc906cbc0ded0274a0a82d77323b22b73db4b2a264c998a168ddc0ed7cc540465fbc1355b64cb8617022b9ed33c700059f5595a92d7e268a8c3e6071a9b4b12fae509ef402fcbf2a11c98ebeb7c627c19caa5834f9ece50314caf1724b265a0e754b0601055ec460a1ed4ce44bdccb73e652ea7d9d76c1340e1552e59e723628bcd7480c1b741cbbb0774d67be56b6f1efb63756384a6c57d7e7976b8e17138123c7903794754a9fe2825787eb5b4078deaea2dd4bfa7eea2223ba0e14a46a7d659764ea0237b4eac2ab1cb606997793763c82ea7a3b3c46ff8fa04c7d61ca6551a7516d544e2ab40298353c60051d4f708816ac5790fb095ac2deb2b58a34bf5b45436ab80992e1f16b6e9e00712c848b897ddf799c920e97303a9a4e083515782f1701dc04eeae106632a5dbc51af86310ae8ef12cdb98154bd69cebddd61ef091134e53410d02a078fc32cf561aef26d338596565db1f79ac1b41d9600632b0bc61b27fa0f907110aa0734d5b9775bad0208ae038b29bb9cb27bf766ed543f527c309e71249e3f124130aaeec8766467b3cb65ba0246ab93556494df03e3dbc77e9d6419abf7a026a48c1e1a3bc51729d3db6adc67b1fa349615a5facea33d9d1d852da30c514e1f622d0dffa74761f067652eb04ffeae805939e83bf3eb3532979525c88b2e53055981f74cbfdcd4298fe283c30efa4830dde6bc02a813cd596d1f28ea396a5827f97fae8a0b94ff7f0fb9dd5acf4adb02ee77d60322192d345254f8bb54854b13579fbef6cac9d4af8227cb1a25117651e98a70c9b3d91b0cffc0fb095823b615c11016635924ad40da3a659f2038554a793bd7deb735acfe2afb3b4726ffc61487f0602dad3f849f8354d8662f7c4d3a4356d4dc8e9e513f73a4b34e05625d253bdbcf0a5ae5fecc8098ce42541de26756184e0ec89f219c000003f2e8de9a084d0a8eafe379b3e12ac2fc781d69cb2e8ff00dc7f9d550132ea4f872b863eb074758a681f017d70c9eaf0eb0ec4e44e873c763399b4c71a06600929bf9e5620571901d26301bc5d7f7c17879e801aeb65dce9a0c67529537cb1ab69bde3ff4155f74e0fc5ba1b108626789ecc58cbc3d6549ab8add8b272ce8328354ffd9860fd7625886ef181fc952efba50d903b9775000af5f034dd5e66a3ab4d2211dae0140d6a12c9ce7d4adb086072c4424d0b6e98d74ef520e4636c8b51bfe8bd37725a6ce04c3e4889b06661ad0a66ad4d2a44e9cca5e8ea3e3ae42e70d47c2251719a876f579fa8937a6cb69e39f102c77697fc3d75411c8efe1db236aa0f876b60daa1fe6301089d44730b8f697b5841c2eb0eae44994edfc15735fc7fa2ec8550d3f2db07686e7380d4b36f4339ecd2bf1b86667f9cee93a033078bea55581d80d2ba30c009b3a67cd74b7c99db04c46b919788c47a1d8ce311c2734af0bf5430195f1ed15850c282c3fb852a919ff70f210a790ea266d3ef0baedaaaa5c52440167a862d4f95d01cc1c0fa21bc2a5b65c77f8b9327ef1eaa0d45c9682abfd992cc6b5e52b2efdbc3fc69b299cb097d62f81fded3271ffc53e8b79623a6a681c18aefcdf54f95ba9ce288b37f0ea4b9dc3c040f395a7ab433f24a6d74e916e9011be76a927532cf2e8c51cd2c4cd7e7a63d454c704d1f0ff00003e3f28d635d127687dfeb174c55d127d72bccd1a7cf7e30b2b1bed5fd7269529cd02fc93890e07229004b8458a3a2e47717d7c66f3e05634ef834d7c31d7538443974b354ef022d41ca9a8cf78f29f21280bca760d1e035bf7f4148ec78f62045bda8ed145dd20852023d388d9dbb0d811a0bbf90d846f95eb54ef3cf8c2545696ad2b9fbbe90ab7202ad7149b6e5f4260abdaaef33fd0d2938346291df7e8bc41d0e0e51fab211fdf57326448ba3a0778fef2b38d2a361390ede622630f3a51ab8243e33748039fa851e07639589952949a85ec48af9fc7ecd16829a044fc972b6a7ee0d1381683bfbf6fb9ca20b0edf5ec9aa65c9231b030fd63ea4e0c02bea0e6a9de6b292967d72cfefd5ae8c889573eaf607074c39875295faafbd308e61662d4dc051a22b68019f76fe945577646bbbd25a4075f55c049cb859671cd3f6faa97429e2c099e05083dcc0fe477e3482820f93f3103f542d009264d8c06dfb94fba04e16a12442ea7158c668e3087992db9086d69fd3313b78ea3ac7adcb1e5c6b655dd9313809db96adf03e1156d986a72d2e44c3ed95a9fc009a53f0ada024761e7a6cb";
	vm.prank(0x0000000000000000000000000000000000000002);
	offchain_registry.submit_op(0, 0x000000000000000000000000000000000000000000000000000000000000000a, 0x23103779b4d6b57846ad82551b36315caa50fd181ede7f76a92f7b2e773105e2, op_proof);
    }
}
